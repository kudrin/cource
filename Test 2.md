Мы предоставляем услуги. Рынок услуг, особенно бытовых - высококонкурентен. Сложно создать услугу которую нельзя скопировать. Конкуренты также могут демпенгануть по цене, так что ценовую политику тоже нельзя назвать приемуществом.

Но качество сервиса, то как мы относимся к нашим клиентам, как мы удовалетвореям их потребности скопировать сложно.

Мы работаем только с самыми лучшими воркерами, и для каждого вашего заказа мы подберем наиболее подходящего из них. 

**WorkerShop** - CoreDomain, его предметная область, это нахождение (тестирование) и подбор воркера для конкретного заказа.

**Orders** - Содержит информацию о заявках, является оркестратором остальных сервисов. В основе лежит сущность **Заказ**.

Тут же обрабатываются ставки на заказы. 

**Accouting** - Общая фин. отчетность. Позволяет централизировано отделу финансов, смотреть анализировать все фин. операции.

**Warehouse** - Основное с чем приходится работать, это с заявками на подбор инструментов

**Auth** - Авторизация и аутентификация.

**Analyse** - Сводная аналитика по всей компании, нужна для принятия руководящих решений.

![](https://documents.lucid.app/documents/b9ff6147-96bd-48cc-b6df-e697f70eba37/pages/0_0?a=1911&x=238&y=178&w=924&h=924&store=1&accept=image%2F*&auth=LCA%20e592fbe71f2646b3da11906242442aaf79fac64b6cfc53f3d52338dbf9b63d01-ts%3D1684774264)

Немного разъясню свою позицию относительно почему схема выглядит данным образом:
- **WorkerShop** является главным поддоменом, о этом указанно выше
- **Orders** - является оркестратором, связующим поддоменом, но его сложно назвать уникальным для бизнеса
- Остальные поддомены, по факту можно заменить на внешние продукты:
	- **Auth** - AWS IAM
	- **Warehouse** - 1c склад
	- **Analytics** - Metabase
- **Accouting** - тут конечно напрашивается замена на 1с, но если вспомнить про неявные требования, что у нас как и воркер так и исполнитель, точно хотят знать свой баланс. Так что явно должна быть связка с 1С, т.к. у нас в компании должны быть внесистемные выплаты, зарплата менеджерам, например. Но первичку мы также храним внутри своей экосистемы.

Представим карту контекстов.

![](https://documents.lucid.app/documents/b9ff6147-96bd-48cc-b6df-e697f70eba37/pages/8-k0k-I5dqwa?a=1910&x=-49&y=-31&w=1958&h=1562&store=1&accept=image%2F*&auth=LCA%208f80f4d5f87c00a800416e08958a989bb3e5c1b705d76be6a0cc0268fee028fd-ts%3D1684774264)

Хотя в требованиях мало что было сказано про аналитику, без бизнес-метрик, мы не сможем адекватно оценивать успешность той или иной гипотезы. Это ключевой инструмент для принятия дальнейших решений.

**ES диаграмма** потерпела небольшие изменения, betting ушел в заказы, billing переименован в accouting, удалил технический поддомен по нотификациям.


![Main images](images/esd2.jpg)

Несмотря на то, что в карте контекстов было много уделено аналитики отражения на ES диаграмме оно не нашло из-за недостатка требований. Нужно будет с бизнесом проговорить этот важный вопрос.

**Модель данных**:

![](https://documents.lucid.app/documents/b9ff6147-96bd-48cc-b6df-e697f70eba37/pages/CtB0YG9oARwR?a=2491&x=-112&y=-390&w=2015&h=1100&store=1&accept=image%2F*&auth=LCA%2085d9f795b5f48fcac35fd2cad84d7e36d66b351d20b2b633ef4756d36235fa0f-ts%3D1684774264)


Выбор архитектуры, я не вижу не одной бизнес потребности, связанной с высокой нагрузкой, и реальными потребностями в горизонтальном масштабировании. Поэтому дальнейший подход выделения микросервисов, основан прежде всего на связанности межу компонентами.


Я бы выбрал смешанный подход между modular монолитом, service-based и микросервисной архитектурой.

То, что точно можно легко выделить, убираем в микросервис. 

То где связанность высокая, но хочется разделить, убираем service-based, потом или соединим, или разъединим, через несколько итераций. Тут создаем искусственные ограничения.

А, там где связанность низкая, на одной сущности, убираем в модули. Это всего будет легко разделить, но сейчас мы сэкономим кучу средств.


![](https://documents.lucid.app/documents/b9ff6147-96bd-48cc-b6df-e697f70eba37/pages/_bE0iR2CMofJ?a=3171&x=-942&y=-687&w=2686&h=1474&store=1&accept=image%2F*&auth=LCA%200fd585c845a98492bac5990dd4b29cf092002f3bcd18adf2c4efa8e3dc221228-ts%3D1684774264)

