
# Инфтраструктура

В качестве основновной архитектуры была выбранна микросервсиная модель. Возможно это не лучшее решение для стартапа (дороже и по денгами времени), тут мы руководствуемся преде всего академческими целями. Опять же для стартапа тут явно раздутый MVP.

![[Pasted image 20230512133215.png]]
## Accounts 

Для управления аккаутами, авторизацией и аутендитификацей и управления ролями.

В системе сейчас обозначенно ряд ролей. 

- **Клиента** (Роль получается автоматически после регистрации)
- **Воркер** (Роль просле тестирования)
- **Админстратор** (Роль назначется разработчиком)
- **Менеджер** (Роль назначается администратором)
- **Закупщик** (Роль назначается администратором)
- **Контролер** (Роль назначается администратором)

Accounts Хранит в JWT токене базовую информацию в аккаунте пользователя. ACL не реализуем, для скорости реализации.


## Cabinet (Front-end)

Любой пользователь работает с ситемой через SPA. SPA состоит из различных модулей, модули отрисовывются по ролям. **Кабинет администратора**, **Кабинет Клиента**, **Кабинет Менеджера** и т. д.

Работа с бэеэндом ведется через **API-Gateway** для изоляции инфраструктуры через JSON запросы.

## Mobile applications

Должно быть согласовано с заказчиком, для итерационной поставки услуг, заказчику будет предложенно сначало реализовать **Кабинет Клиента**, потом **Кабинет Воркера**.


# Domains

Для работы с доменами будем отталкиваться от основного флоу:

1. Клиент регистрируется
2. Клиент создает заявку
3. Подискиваем воркера
4. Укомплектовываем воркера всем необходимым
5. Оплачиваем заказ
6. Получаем отчет в виде письма 

Отельным домены
- сервис тестирования, который позволяет регистрировать воркеров.
- сервис аналитики, собираем метрики по отчетам
- сервис ставок, обратываем успешные события


![](https://documents.lucid.app/documents/ad67a0b2-f117-46e5-8dff-f41df47ec975/pages/~qgXeX-eI4DN?a=1261&x=-329&y=121&w=1518&h=1309&store=1&accept=image%2F*&auth=LCA%20e1f8a8ea6d33bf75fd96d59e3a0b1877785ff8d56181b6805a8a22fe77357144-ts%3D1683890294)
![](![](https://documents.lucid.app/documents/ad67a0b2-f117-46e5-8dff-f41df47ec975/pages/~qgXeX-eI4DN?a=1261&x=-329&y=121&w=1518&h=1309&store=1&accept=image%2F*&auth=LCA%20e1f8a8ea6d33bf75fd96d59e3a0b1877785ff8d56181b6805a8a22fe77357144-ts%3D1683890294))


## Orders

Корневой домен. Содержит информацию о заявках, является окестратором остальных сервисов. В основе лежит сущность **Заявка**. Может быть релизована стейт машиной или сагой, сага на данном этапе явно офрехед.

Заказы по факту оплаты хранят в себе статистику по ценам, и формируют "среднюю цену" заказа (US-020). 

Менджер может управлять типами заказов (US-030). 


## Matching

Система подбора **Воркера**. Получаем информацию о клиента и всех его заказах. Хранит информацию о **Воркерах**

Вероятнее всего формирует стоимость заказа. (US-050)
Формирует необходимые скидки, через субдомен. (US-040).
Не передаем это в биллиг, т.к. он незнает детали заказа.

## Store

Склад. Помогает снабжать **Воркеров** всем необходимым упавляется **Закупщиками**.

Программа лояльности с печеньями (US-170) тоже сюда.

## Biling 

Хрнаит в себе атомарные фин. транзакции, через двойную запись дебитор-кредитор, суммы положительные, деньги, чере Value Object.

## Testing

Проверяет, возможность **Аккаунта**, стать **Воркером**. Менеджер может управлять необходимыми тестами и следить за резкльтатами выполнения.

При успешном тестировании Кандидата, отправляет событие на MatchingDomain.

## Analyst

Сервис аналитики, который хранит информацию о изменении заказаов, может получать события и от других доменов

## Betting

Серрвис для ставок менеджеров на те или иные заказы.








